(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{112:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a(23),c=a.n(n),s=(a(78),a(79),a(11)),o=a(10),i=a(117),l=a(29),u=a(7),j=a(122),d=a(68),p=a(1),O=function(e){var t=e.history,a=Object(r.useState)(""),n=Object(u.a)(a,2),c=n[0],s=n[1];return Object(p.jsxs)(j.a,{onSubmit:function(e){e.preventDefault(),c.trim()?t.push("/search/".concat(c)):t.push("/")},inline:!0,children:[Object(p.jsx)(j.a.Control,{type:"text",name:"q",onChange:function(e){return s(e.target.value)},placeholder:"Search Products...",className:"mr-sm-2 ml-sm-5"}),Object(p.jsx)(d.a,{type:"submit",variant:"outline-success",className:"p-2",children:"Search"})]})},b=a(123),h=a(125),x=a(121),f=a(8),g=f.useDispatch,m=f.useSelector,E=a(28).logout,v=function(){var e=g(),t=m((function(e){return e.userLogin})).userInfo;return Object(p.jsx)("header",{children:Object(p.jsx)(b.a,{bg:"dark",variant:"dark",expand:"lg",collapseOnSelect:!0,children:Object(p.jsxs)(i.a,{children:[Object(p.jsx)(l.LinkContainer,{to:"/",children:Object(p.jsx)(b.a.Brand,{children:"CEE BOOK EXCHANGE"})}),Object(p.jsx)(o.d,{render:function(e){var t=e.history;return Object(p.jsx)(O,{history:t})}}),Object(p.jsx)(b.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(p.jsx)(b.a.Collapse,{id:"basic-navbar-nav",children:Object(p.jsx)(h.a,{className:"ml-auto",children:t?Object(p.jsxs)(x.a,{title:t.name,id:"username",children:[Object(p.jsx)(l.LinkContainer,{to:"/profile",children:Object(p.jsx)(x.a.Item,{children:"Profile"})}),Object(p.jsx)(x.a.Item,{onClick:function(){e(E())},children:"Logout"})]}):Object(p.jsx)(l.LinkContainer,{to:"/login",children:Object(p.jsxs)(h.a.Link,{children:[Object(p.jsx)("i",{className:"fas fa-user"}),"Sign In"]})})})})]})})})},S=a(118),y=a(67),_=function(){return Object(p.jsx)("footer",{children:Object(p.jsx)(i.a,{children:Object(p.jsx)(S.a,{children:Object(p.jsx)(y.a,{className:"text-center py-3",children:"Copyright \xa9 Bookexchange"})})})})},C=a(8),I=a(126),L=a(6),T=a.n(L),R=function(e){var t=e.value,a=e.text,r=e.color;return Object(p.jsxs)("div",{className:"rating",children:[Object(p.jsx)("span",{children:Object(p.jsx)("i",{style:{color:r},className:t>=1?"fas fa-star":t>=.5?"fas fa-start-half-alt":"far fa-star"})}),Object(p.jsx)("span",{children:Object(p.jsx)("i",{style:{color:r},className:t>=2?"fas fa-star":t>=1.5?"fas fa-start-half-alt":"far fa-star"})}),Object(p.jsx)("span",{children:Object(p.jsx)("i",{style:{color:r},className:t>=3?"fas fa-star":t>=2.5?"fas fa-start-half-alt":"far fa-star"})}),Object(p.jsx)("span",{children:Object(p.jsx)("i",{style:{color:r},className:t>=4?"fas fa-star":t>=3.5?"fas fa-start-half-alt":"far fa-star"})}),Object(p.jsx)("span",{children:Object(p.jsx)("i",{style:{color:r},className:t>=5?"fas fa-star":t>=4.5?"fas fa-star-half-alt":"far fa-star"})}),Object(p.jsx)("span",{children:a&&a})]})};R.defaultProps={color:"#f8e825"},R.proTypes={value:T.a.number.isRequired,text:T.a.string.isRequired,color:T.a.string};var U=R,k=function(e){var t=e.product;return Object(p.jsxs)(I.a,{className:"my-3 p3 rounded",children:[Object(p.jsx)(s.Link,{to:"/product/".concat(t._id),children:Object(p.jsx)(I.a.Img,{src:t.image,variant:"top"})}),Object(p.jsxs)(I.a.Body,{children:[Object(p.jsx)(s.Link,{to:"/product/".concat(t._id),children:Object(p.jsx)(I.a.Title,{as:"div",children:Object(p.jsx)("strong",{children:t.title})})}),Object(p.jsx)(I.a.Text,{as:"div",children:Object(p.jsx)(U,{value:t.rating,text:"".concat(t.numReviews)})}),Object(p.jsx)(I.a.Text,{as:"h3",children:0===t.price?"Free":"$".concat(t.price)})]})]})},w=a(9),A=a.n(w),D=a(15),B=a(16),N=a.n(B),P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return function(){var a=Object(D.a)(A.a.mark((function a(r){var n,c;return A.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,r({type:"BOOK_LIST_REQUEST"}),a.next=4,N.a.get("/api/books?keyword=".concat(e,"&pageNumber=").concat(t));case 4:n=a.sent,c=n.data,r({type:"BOOK_LIST_SUCCESS",payload:c}),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),r({type:"BOOK_LIST_FAIL",payload:a.t0.response&&a.t0.response.data.message?a.t0.response.data.message:a.t0.message});case 12:case"end":return a.stop()}}),a,null,[[0,9]])})));return function(e){return a.apply(this,arguments)}}()},K=a(73),F=a(127),G=function(e){var t=e.pages,a=e.page,r=e.isAdmin,n=void 0!==r&&r,c=e.keyword,s=void 0===c?"":c;return t>1&&Object(p.jsx)(F.a,{children:Object(K.a)(Array(t).keys()).map((function(e){return Object(p.jsx)(l.LinkContainer,{to:n?"/profile/".concat(e+1):s?"/search/".concat(s,"/page/").concat(e+1):"/page/".concat(e+1),children:Object(p.jsx)(F.a.Item,{active:e+1===a,children:e+1})},e+1)}))})},Q=function(e){var t=e.match,a=t.params.keyword,n=t.params.pageNumber||1,c=Object(C.useDispatch)(),s=Object(C.useSelector)((function(e){return e.bookList})),o=s.loading,i=s.error,l=s.books,u=s.pages,j=s.page;return console.log("bookList"),console.log(s),Object(r.useEffect)((function(){c(P(a,n))}),[c,a,n]),console.log(l),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("h1",{style:{marginTop:"5px"},children:"Civil Engineering Course Books"}),o?Object(p.jsx)("h2",{children:"Loading..."}):i?Object(p.jsx)("h3",{children:i}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(S.a,{children:l.map((function(e){return Object(p.jsx)(y.a,{sm:12,md:6,lg:4,xl:3,children:Object(p.jsx)(k,{product:e})},e._id)}))}),Object(p.jsx)(G,{pages:u,page:j,keyword:a||""})]})]})},V=a(119),W=a(128),z=a(124),J=function(e){var t=e.variant,a=e.children;return Object(p.jsx)(z.a,{variant:t,children:a})};J.defaultProps={variant:"info"};var $=J,q=function(e){var t=e.match,a=(e.history,Object(r.useState)({reviews:[]})),n=Object(u.a)(a,2),c=n[0],o=n[1],i=Object(r.useState)("18080342d@connect.polyu.hk"),l=Object(u.a)(i,2),O=l[0],b=(l[1],Object(r.useState)(0)),h=Object(u.a)(b,2),x=h[0],f=h[1],g=Object(r.useState)(""),m=Object(u.a)(g,2),E=m[0],v=m[1],_=Object(C.useSelector)((function(e){return e.bookReviewCreate})),I=_.success,L=_.loading,T=_.error,R=Object(C.useDispatch)(),k=Object(C.useSelector)((function(e){return e.userLogin})).userInfo;Object(r.useEffect)((function(){I&&(f(0),v(""));var e="/api/books/".concat(t.params.id);(function(){var t=Object(D.a)(A.a.mark((function t(){var a,r;return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N.a.get(e);case 2:a=t.sent,r=a.data,o(r);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[R,t,I]),console.log("product:"),console.log(c);return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(s.Link,{to:"/",className:"btn btn-light my-3",children:"Go Back"}),Object(p.jsxs)(S.a,{children:[Object(p.jsx)(y.a,{md:4,children:Object(p.jsx)(V.a,{src:c.image,alt:c.title,fluid:!0})}),Object(p.jsx)(y.a,{md:3,children:Object(p.jsxs)(W.a,{variant:"flush",children:[Object(p.jsx)(W.a.Item,{children:Object(p.jsx)("h3",{children:c.title})}),Object(p.jsx)(W.a.Item,{children:Object(p.jsx)(U,{value:c.rating,text:"".concat(c.numReviews)})}),Object(p.jsxs)(W.a.Item,{children:["Price: ",0===c.price?"Free":"$".concat(c.price)]}),Object(p.jsxs)(W.a.Item,{children:["Description: ",c.description]})]})}),Object(p.jsx)(y.a,{md:4,children:Object(p.jsxs)(W.a,{variant:"flush",children:[Object(p.jsx)(W.a.Item,{children:Object(p.jsxs)(S.a,{children:[Object(p.jsx)(y.a,{children:"Price:"}),Object(p.jsx)(y.a,{children:0===c.price?"Free":"$".concat(c.price)})]})}),Object(p.jsx)(W.a.Item,{children:Object(p.jsxs)(S.a,{children:[Object(p.jsx)(y.a,{children:"Status:"}),Object(p.jsx)(y.a,{children:"physical"===c.format?c.countInStock>0?"In Stock":"Out of Stock ":"In Stock"})]})}),Object(p.jsx)(W.a.Item,{children:Object(p.jsxs)(S.a,{children:[Object(p.jsx)(y.a,{children:"Fromat:"}),Object(p.jsx)(y.a,{children:c.format})]})}),Object(p.jsx)(W.a.Item,{children:Object(p.jsxs)(S.a,{children:[Object(p.jsx)(y.a,{children:"Contact"}),Object(p.jsx)(y.a,{children:O})]})}),Object(p.jsx)(W.a.Item,{children:Object(p.jsx)(s.Link,{to:"".concat(c.file),target:"_blank",download:!0,children:Object(p.jsx)(d.a,{className:"btn-block",type:"button",children:"Download Book PDF"})})})]})})]}),Object(p.jsx)(S.a,{children:Object(p.jsxs)(y.a,{md:6,children:[Object(p.jsx)("h2",{children:"Comments"}),0===c.reviews.length?Object(p.jsx)($,{children:"No Comments"}):Object(p.jsxs)(W.a,{variant:"flush",children:[c.reviews.map((function(e){return Object(p.jsxs)(W.a.Item,{children:[Object(p.jsx)("strong",{children:e.name}),Object(p.jsx)(U,{value:e.rating}),Object(p.jsx)("p",{children:e.createdAt.substring(0,10)}),Object(p.jsx)("p",{children:e.comment})]},e._id)})),Object(p.jsxs)(W.a.Item,{children:[Object(p.jsx)("h2",{children:"Write a Comment"}),I&&Object(p.jsx)($,{variant:"success",children:"Review submitted successfully"}),L&&"Loading...",T&&Object(p.jsx)($,{variant:"danger",children:T}),k?Object(p.jsxs)(j.a,{onSubmit:function(e){var a,r;e.preventDefault(),R((a=t.params.id,r={rating:x,comment:E},function(){var e=Object(D.a)(A.a.mark((function e(t,n){var c,s,o,i,l;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"BOOK_CREATE_REVIEW_REQUEST"}),c=n(),s=c.userLogin.userInfo,o={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s.token)}},e.next=6,N.a.post("/api/books/".concat(a,"/reviews"),r,o);case 6:i=e.sent,l=i.data,t({type:"BOOK_CREATE_REVIEW_SUCCESS",payload:l}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),t({type:"BOOK_CREATE_REVIEW_FAIL",payload:e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,a){return e.apply(this,arguments)}}()))},children:[Object(p.jsxs)(j.a.Group,{controlId:"rating",children:[Object(p.jsx)(j.a.Label,{children:"Rating"}),Object(p.jsxs)(j.a.Control,{as:"select",value:x,onChange:function(e){return f(e.target.value)},children:[Object(p.jsx)("option",{value:"",children:"Select..."}),Object(p.jsx)("option",{value:"1",children:"1 - Poor"}),Object(p.jsx)("option",{value:"2",children:"2 - Fair"}),Object(p.jsx)("option",{value:"3",children:"3 - Good"}),Object(p.jsx)("option",{value:"4",children:"4 - Very Good"}),Object(p.jsx)("option",{value:"5",children:"5 - Excellent"})]})]}),Object(p.jsxs)(j.a.Group,{controlId:"comment",children:[Object(p.jsx)(j.a.Label,{children:"Comment"}),Object(p.jsx)(j.a.Control,{as:"textarea",row:"3",value:E,onChange:function(e){return v(e.target.value)}})]}),Object(p.jsx)(d.a,{disabled:L,type:"submit",variant:"primary",children:"Submit"})]}):Object(p.jsxs)($,{children:["Please ",Object(p.jsx)(s.Link,{to:"/login",children:"sign in"})," to write a review"," "]})]})]})]})})]})},H=function(e){var t=e.children;return Object(p.jsx)(i.a,{children:Object(p.jsx)(S.a,{className:"justify-content-md-center",children:Object(p.jsx)(y.a,{xs:12,md:6,children:t})})})},M=a(28),X=function(e){var t=e.location,a=e.history,n=Object(r.useState)(""),c=Object(u.a)(n,2),o=c[0],i=c[1],l=Object(r.useState)(""),O=Object(u.a)(l,2),b=O[0],h=O[1],x=t.search?t.search.split("=")[1]:"/",f=Object(C.useDispatch)(),g=Object(C.useSelector)((function(e){return e.userLogin}));console.log("userLogin"),console.log(g);var m=g.loading,E=g.error,v=g.userInfo;Object(r.useEffect)((function(){v&&(console.log(a),a.push(x))}),[a,v,x]);return Object(p.jsxs)(H,{children:[Object(p.jsx)("h1",{children:"Sign In"}),E&&Object(p.jsx)($,{variant:"danger",children:E}),m&&"Loading...",Object(p.jsxs)(j.a,{onSubmit:function(e){e.preventDefault(),f(Object(M.login)(o,b))},children:[Object(p.jsxs)(j.a.Group,{controlId:"email",children:[Object(p.jsx)(j.a.Label,{children:"Email Address"}),Object(p.jsx)(j.a.Control,{type:"email",placeholder:"Enter email",value:o,onChange:function(e){return i(e.target.value)}})]}),Object(p.jsxs)(j.a.Group,{controlId:"password",children:[Object(p.jsx)(j.a.Label,{children:"Password"}),Object(p.jsx)(j.a.Control,{type:"password",placeholder:"Enter password",value:b,onChange:function(e){return h(e.target.value)}})]}),Object(p.jsx)(d.a,{type:"submit",variant:"primary",children:"Sign In"})]}),Object(p.jsx)(S.a,{className:"py-3",children:Object(p.jsxs)(y.a,{children:["New Customer?"," ",Object(p.jsx)(s.Link,{to:x?"/register?redirect=".concat(x):"/register",children:"Register"})]})})]})},Y=function(e){var t=e.location,a=e.history,n=Object(r.useState)(""),c=Object(u.a)(n,2),o=c[0],i=c[1],l=Object(r.useState)(""),O=Object(u.a)(l,2),b=O[0],h=O[1],x=Object(r.useState)(""),f=Object(u.a)(x,2),g=f[0],m=f[1],E=Object(r.useState)(""),v=Object(u.a)(E,2),_=v[0],I=v[1],L=Object(r.useState)(null),T=Object(u.a)(L,2),R=T[0],U=T[1],k=Object(C.useDispatch)(),w=Object(C.useSelector)((function(e){return e.userRegister})),A=t.search?t.search.split("=")[1]:"/",D=w.loading,B=w.error,N=w.userInfo;Object(r.useEffect)((function(){N&&a.push(A)}),[a,N,A]);return Object(p.jsxs)(H,{children:[Object(p.jsx)("h1",{children:"Sign Up"}),R&&Object(p.jsx)($,{variant:"danger",children:R}),B&&Object(p.jsx)($,{variant:"danger",children:B}),D&&"Loading...",Object(p.jsxs)(j.a,{onSubmit:function(e){e.preventDefault(),g!==_?U("Passwords do not match"):k(Object(M.register)(o,b,g))},children:[Object(p.jsxs)(j.a.Group,{controlId:"Name",children:[Object(p.jsx)(j.a.Label,{children:"Name"}),Object(p.jsx)(j.a.Control,{type:"Name",placeholder:"Enter Name",value:o,onChange:function(e){return i(e.target.value)}})]}),Object(p.jsxs)(j.a.Group,{controlId:"email",children:[Object(p.jsx)(j.a.Label,{children:"Email Address"}),Object(p.jsx)(j.a.Control,{type:"email",placeholder:"Enter email",value:b,onChange:function(e){return h(e.target.value)}})]}),Object(p.jsxs)(j.a.Group,{controlId:"password",children:[Object(p.jsx)(j.a.Label,{children:"Password"}),Object(p.jsx)(j.a.Control,{type:"password",placeholder:"Enter password",value:g,onChange:function(e){return m(e.target.value)}})]}),Object(p.jsxs)(j.a.Group,{controlId:"confirmPassword",children:[Object(p.jsx)(j.a.Label,{children:" Confirm Password"}),Object(p.jsx)(j.a.Control,{type:"password",placeholder:"Confirm password",value:_,onChange:function(e){return I(e.target.value)}})]}),Object(p.jsx)(d.a,{type:"submit",variant:"primary",children:"Register"})]}),Object(p.jsx)(S.a,{className:"py-3",children:Object(p.jsxs)(y.a,{children:["Have an Account?"," ",Object(p.jsx)(s.Link,{to:A?"/login?redirect=".concat(A):"/login",children:"Login"})]})})]})},Z=a(120),ee=function(e){var t=e.history,a=e.match.params.pageNumber||1,n=Object(C.useDispatch)(),c=Object(C.useSelector)((function(e){return e.bookList})),s=c.loading,o=c.error,i=c.books,u=c.page,j=c.pages,O=Object(C.useSelector)((function(e){return e.bookDelete})),b=O.loading,h=O.error,x=O.success,f=Object(C.useSelector)((function(e){return e.bookCreate})),g=f.loading,m=f.error,E=f.success,v=f.product,_=Object(C.useSelector)((function(e){return e.userLogin})).userInfo;Object(r.useEffect)((function(){n({type:"BOOK_CREATE_RESET"}),_||t.push("/login"),E?t.push("/product/".concat(v._id,"/edit")):n(P("",a))}),[n,t,_,x,E,v,a]);var I=function(e){window.confirm("Are you sure")&&n(function(e){return function(){var t=Object(D.a)(A.a.mark((function t(a,r){var n,c,s,o,i;return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"BOOK_DELETE_REQUEST"}),n=r(),c=n.userLogin.userInfo,s={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c.token)}},t.next=6,N.a.delete("/api/books/".concat(e),s);case 6:o=t.sent,i=o.data,a({type:"BOOK_DELETE_SUCCESS",payload:i}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),a({type:"BOOK_DELETE_FAIL",payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,a){return t.apply(this,arguments)}}()}(e))};return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)(S.a,{className:"align-items-center",children:[Object(p.jsx)(y.a,{children:Object(p.jsx)("h1",{children:"My Uploads"})}),Object(p.jsx)(y.a,{className:"text-right",children:Object(p.jsxs)(d.a,{className:"my-3",onClick:function(){n(function(){var e=Object(D.a)(A.a.mark((function e(t,a){var r,n,c,s,o;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"BOOK_CREATE_REQUEST"}),r=a(),n=r.userLogin.userInfo,c={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n.token)}},e.next=6,N.a.post("/api/books/",{},c);case 6:s=e.sent,o=s.data,t({type:"BOOK_CREATE_SUCCESS",payload:o}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),t({type:"BOOK_CREATE_FAIL",payload:e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,a){return e.apply(this,arguments)}}())},children:[Object(p.jsx)("i",{className:"fas fa-plus"})," Upload Book / Notes"]})})]}),b&&"Loading...",h&&Object(p.jsx)($,{variant:"danger",children:h}),g&&"Loading...",m&&Object(p.jsx)($,{variant:"danger",children:m}),s?"Loading...":o?Object(p.jsx)($,{variant:"danger",children:o}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)(Z.a,{striped:!0,bordered:!0,hover:!0,responsive:!0,className:"table-sm",children:[Object(p.jsx)("thead",{children:Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{children:"ID"}),Object(p.jsx)("th",{children:"NAME"}),Object(p.jsx)("th",{children:"PRICE"}),Object(p.jsx)("th",{children:"CATEGORY"}),Object(p.jsx)("th",{children:"BRAND"}),Object(p.jsx)("th",{})]})}),Object(p.jsx)("tbody",{children:i.map((function(e){return Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{children:e._id}),Object(p.jsx)("td",{children:e.name}),Object(p.jsx)("td",{children:e.author}),Object(p.jsxs)("td",{children:["$",e.price]}),Object(p.jsx)("td",{children:e.description}),Object(p.jsxs)("td",{children:[Object(p.jsx)(l.LinkContainer,{to:"/product/".concat(e._id,"/edit"),children:Object(p.jsx)(d.a,{variant:"light",className:"btn-sm",children:Object(p.jsx)("i",{className:"fas fa-edit"})})}),Object(p.jsx)(d.a,{variant:"danger",className:"btn-sm",onClick:function(){return I(e._id)},children:Object(p.jsx)("i",{className:"fas fa-trash"})})]})]},e._id)}))})]}),Object(p.jsx)(G,{pages:j,page:u,isAdmin:!0})]})]})},te=function(e){var t=e.history,a=Object(r.useState)(""),n=Object(u.a)(a,2),c=n[0],s=n[1],i=Object(r.useState)(""),l=Object(u.a)(i,2),O=l[0],b=l[1],h=Object(r.useState)(""),x=Object(u.a)(h,2),f=x[0],g=x[1],m=Object(r.useState)(""),E=Object(u.a)(m,2),v=E[0],_=E[1],I=Object(r.useState)(null),L=Object(u.a)(I,2),T=L[0],R=L[1],U=Object(C.useDispatch)(),k=Object(C.useSelector)((function(e){return e.userDetails})),w=k.loading,A=k.error,D=k.user,B=Object(C.useSelector)((function(e){return e.userLogin})).userInfo,N=Object(C.useSelector)((function(e){return e.userUpdateProfile})).success;Object(r.useEffect)((function(){B?D&&D.name&&!N?(s(D.name),b(D.email)):(U({type:"USER_UPDATE_RESET"}),U(Object(M.getUserDetails)("profile"))):t.push("/login")}),[B,U,t,D,N]);return Object(p.jsxs)(S.a,{children:[Object(p.jsxs)(y.a,{md:3,children:[Object(p.jsx)("h1",{children:"Sign Up"}),T&&Object(p.jsx)($,{variant:"danger",children:T}),A&&Object(p.jsx)($,{variant:"danger",children:A}),N&&Object(p.jsx)($,{variant:"success",children:"The profile is updated"}),w&&"Loading...",Object(p.jsxs)(j.a,{onSubmit:function(e){e.preventDefault(),f!==v?R("Passwords do not match"):U(Object(M.updateUserProfile)({id:D._id,name:c,email:O,password:f}))},children:[Object(p.jsxs)(j.a.Group,{controlId:"Name",children:[Object(p.jsx)(j.a.Label,{children:"Name"}),Object(p.jsx)(j.a.Control,{type:"Name",placeholder:"Enter Name",value:c,onChange:function(e){return s(e.target.value)}})]}),Object(p.jsxs)(j.a.Group,{controlId:"email",children:[Object(p.jsx)(j.a.Label,{children:"Email Address"}),Object(p.jsx)(j.a.Control,{type:"email",placeholder:"Enter email",value:O,onChange:function(e){return b(e.target.value)}})]}),Object(p.jsxs)(j.a.Group,{controlId:"password",children:[Object(p.jsx)(j.a.Label,{children:"Password"}),Object(p.jsx)(j.a.Control,{type:"password",placeholder:"Enter password",value:f,onChange:function(e){return g(e.target.value)}})]}),Object(p.jsxs)(j.a.Group,{controlId:"confirmPassword",children:[Object(p.jsx)(j.a.Label,{children:" Confirm Password"}),Object(p.jsx)(j.a.Control,{type:"password",placeholder:"Confirm password",value:v,onChange:function(e){return _(e.target.value)}})]}),Object(p.jsx)(d.a,{type:"submit",variant:"primary",children:"Update User Profile"})]})]}),Object(p.jsx)(y.a,{md:9,children:Object(p.jsx)(o.d,{render:function(e){var t=e.history,a=e.match;return Object(p.jsx)(ee,{history:t,match:a,children:" "})}})})]})},ae=function(e){var t=e.match,a=e.history,n=t.params.id,c=Object(r.useState)(""),o=Object(u.a)(c,2),i=o[0],l=o[1],O=Object(r.useState)(0),b=Object(u.a)(O,2),h=b[0],x=b[1],f=Object(r.useState)(""),g=Object(u.a)(f,2),m=g[0],E=g[1],v=Object(r.useState)(""),S=Object(u.a)(v,2),y=S[0],_=S[1],I=Object(r.useState)(""),L=Object(u.a)(I,2),T=L[0],R=L[1],U=Object(r.useState)(""),k=Object(u.a)(U,2),w=k[0],B=k[1],P=Object(r.useState)(!1),K=Object(u.a)(P,2),F=K[0],G=K[1],Q=Object(r.useState)(!1),V=Object(u.a)(Q,2),W=V[0],z=V[1],J=Object(r.useState)(""),q=Object(u.a)(J,2),M=q[0],X=q[1],Y=Object(r.useState)("PDF"),Z=Object(u.a)(Y,2),ee=Z[0],te=Z[1],ae=Object(C.useDispatch)(),re=Object(C.useSelector)((function(e){return e.productDetails})),ne=re.loading,ce=re.error,se=re.product,oe=Object(C.useSelector)((function(e){return e.productUpdate})),ie=oe.loading,le=oe.error,ue=oe.success;console.log("success and update"),console.log(ue),console.log(ie),Object(r.useEffect)((function(){var e;ue?(ae({type:"BOOK_UPDATE_RESET"}),a.push("/profile")):se&&se.title&&se._id===n?(l(se.title),x(se.price),X(se.image),_(se.file),R(se.lessonsCode),B(se.description),E(se.author)):ae((e=n,function(){var t=Object(D.a)(A.a.mark((function t(a,r){var n,c,s,o,i;return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"BOOK_DETAIL_REQUEST"}),n=r(),c=n.userLogin.userInfo,s={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c.token)}},t.next=6,N.a.get("/api/books/".concat(e),s);case 6:o=t.sent,i=o.data,console.log("data from Actions"),console.log(i),a({type:"BOOK_DETAIL_SUCCESS",payload:i}),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),a({type:"BOOK_DETAIL_FAIL",payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e,a){return t.apply(this,arguments)}}()))}),[ae,a,n,se,ue]);var je=function(){var e=Object(D.a)(A.a.mark((function e(t){var a,r,n,c,s;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.target.files[0],(r=new FormData).append("image",a),G(!0),e.prev=4,n={headers:{"Content-Type":"multipart/form-data"}},e.next=8,N.a.post("/api/upload/image",r,n);case 8:c=e.sent,s=c.data,X(s),G(!1),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(4),console.error(e.t0),G(!1);case 18:case"end":return e.stop()}}),e,null,[[4,14]])})));return function(t){return e.apply(this,arguments)}}(),de=function(){var e=Object(D.a)(A.a.mark((function e(t){var a,r,n,c,s;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.target.files[0],(r=new FormData).append("file",a),z(!0),e.prev=4,n={headers:{"Content-Type":"multipart/form-data"}},e.next=8,N.a.post("/api/upload/file",r,n);case 8:c=e.sent,s=c.data,_(s),z(!1),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(4),console.log(e.t0),z(!1);case 18:case"end":return e.stop()}}),e,null,[[4,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(s.Link,{to:"/profile",className:"btn btn-light my-3",children:"Go Back"}),Object(p.jsxs)(H,{children:[Object(p.jsx)("h1",{children:"Edit Product"}),ie&&"Loading...",le&&Object(p.jsx)($,{variant:"danger",children:le}),ne?"Loading...":ce?Object(p.jsx)($,{variant:"danger",children:ce}):Object(p.jsxs)(j.a,{onSubmit:function(e){e.preventDefault(),ae(function(e){return function(){var t=Object(D.a)(A.a.mark((function t(a,r){var n,c,s,o,i;return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"BOOK_UPDATE_REQUEST"}),n=r(),c=n.userLogin.userInfo,s={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c.token)}},t.next=6,N.a.put("/api/books/".concat(e._id),e,s);case 6:o=t.sent,i=o.data,a({type:"BOOK_UPDATE_SUCCESS",payload:i}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),a({type:"BOOK_UPDATE_FAIL",payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,a){return t.apply(this,arguments)}}()}({_id:n,title:i,price:h,image:M,file:y,author:m,description:w,format:ee,lessonsCode:T,rating:se.rating,numReviews:se.numReviews}))},children:[Object(p.jsxs)(j.a.Group,{controlId:"name",children:[Object(p.jsx)(j.a.Label,{children:"Title"}),"p",Object(p.jsx)(j.a.Control,{type:"name",placeholder:"Enter name",value:i,onChange:function(e){return l(e.target.value)}})]}),Object(p.jsxs)(j.a.Group,{controlId:"price",children:[Object(p.jsx)(j.a.Label,{children:"Price"}),Object(p.jsx)(j.a.Control,{type:"number",placeholder:"Enter price",value:h,onChange:function(e){return x(e.target.value)}})]}),Object(p.jsxs)(j.a.Group,{controlId:"image",children:[Object(p.jsx)(j.a.Label,{children:"Image"}),Object(p.jsx)(j.a.Control,{type:"text",placeholder:"Enter image url",value:M,onChange:function(e){return X(e.target.value)}}),Object(p.jsx)(j.a.File,{id:"image-file",label:"Choose Front Image",custom:!0,onChange:je}),F&&"Loading..."]}),Object(p.jsxs)(j.a.Group,{controlId:"file",children:[Object(p.jsx)(j.a.Label,{children:"File"}),Object(p.jsx)(j.a.Control,{type:"text",placeholder:"Enter file url",value:y,onChange:function(e){return _(e.target.value)}}),Object(p.jsx)(j.a.File,{id:"file",label:"Choose File",custom:!0,onChange:de}),W&&"Loading..."]}),Object(p.jsxs)(j.a.Group,{controlId:"Author",children:[Object(p.jsx)(j.a.Label,{children:"Author"}),Object(p.jsx)(j.a.Control,{type:"text",placeholder:"Enter Author",value:m,onChange:function(e){return E(e.target.value)}})]}),Object(p.jsxs)(j.a.Group,{controlId:"format",children:[Object(p.jsx)(j.a.Label,{children:"Format"}),Object(p.jsx)(j.a.Control,{type:"text",placeholder:"Enter format (PDF)",value:ee,onChange:function(e){return te(e.target.value)}})]}),Object(p.jsxs)(j.a.Group,{controlId:"category",children:[Object(p.jsx)(j.a.Label,{children:"Category"}),Object(p.jsx)(j.a.Control,{type:"text",placeholder:"Enter category",value:T,onChange:function(e){return R(e.target.value)}})]}),Object(p.jsxs)(j.a.Group,{controlId:"description",children:[Object(p.jsx)(j.a.Label,{children:"Description"}),Object(p.jsx)(j.a.Control,{type:"text",placeholder:"Enter description",value:w,onChange:function(e){return B(e.target.value)}})]}),Object(p.jsx)(d.a,{type:"submit",variant:"primary",children:"Update"})]})]})]})};var re=function(){return Object(p.jsxs)(s.BrowserRouter,{children:[Object(p.jsx)(v,{}),Object(p.jsx)("main",{children:Object(p.jsx)(i.a,{children:Object(p.jsxs)(i.a,{children:[Object(p.jsx)(o.d,{path:"/login",component:X}),Object(p.jsx)(o.d,{path:"/register",component:Y}),Object(p.jsx)(o.d,{path:"/profile",component:te,exact:!0}),Object(p.jsx)(o.d,{path:"/profile/:pageNumber",component:te,exact:!0}),Object(p.jsx)(o.d,{path:"/product/:id",component:q,exact:!0}),Object(p.jsx)(o.d,{path:"/search/:keyword",component:Q,exact:!0}),Object(p.jsx)(o.d,{path:"/product/:id/edit",component:ae,exact:!0}),Object(p.jsx)(o.d,{path:"/search/:keyword/page/:pageNumber",component:Q,exact:!0})," ",Object(p.jsx)(o.d,{path:"/page/:pageNumber",component:Q})," ",Object(p.jsx)(o.d,{path:"/",component:Q,exact:!0})]})})}),Object(p.jsx)(_,{})]})},ne=a(53),ce=a(72),se=a(40),oe=Object(ne.b)({bookList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{books:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"BOOK_LIST_REQUEST":return{loading:!0};case"BOOK_LIST_SUCCESS":return console.log("books"),console.log(t.payload),{loading:!1,books:t.payload.books,pages:t.payload.pages,page:t.payload.page};case"BOOK_LIST_FAIL":return{loading:!1,error:t.payload};default:return e}},bookReviewCreate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"BOOK_CREATE_REVIEW_REQUEST":return{loading:!0};case"BOOK_CREATE_REVIEW_SUCCESS":return{loading:!1,success:!0};case"BOOK_CREATE_REVIEW_FAIL":return{loading:!1,error:t.payload};case"BOOK_CREATE_REVIEW_RESET":return{};default:return e}},userLogin:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_LOGIN_REQUEST":return{loading:!0};case"USER_LOGIN_SUCCESS":return{userInfo:t.payload};case"USER_LOGIN_FAIL":return{error:t.payload};case"USER_LOGOUT":return{};default:return e}},userRegister:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_REGISTER_REQUEST":return{loading:!0};case"USER_REGISTER_SUCCESS":return{loading:!1,userInfo:t.payload};case"USER_REGISTER_FAIL":return{loading:!1,error:t.payload};default:return e}},userDetails:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{user:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_DETAILS_REQUEST":return Object(se.a)(Object(se.a)({},e),{},{loading:!0});case"USER_DETAILS_SUCCESS":return{loading:!1,user:t.payload};case"USER_DETAILS_FAIL":return{loading:!1,error:t.payload};case"USER_DETAILS_RESET":return{user:{}};default:return e}},userUpdateProfile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{user:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_UPDATE_REQUEST":return Object(se.a)(Object(se.a)({},e),{},{loading:!0});case"USER_UPDATE_SUCCESS":return{loading:!1,success:!0,user:t.payload};case"USER_UPDATE_FAIL":return{loading:!1,error:t.payload};case"USER_UPDATE_RESET":return{};default:return e}},bookCreate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"BOOK_CREATE_REQUEST":return{loading:!0};case"BOOK_CREATE_SUCCESS":return{loading:!1,success:!0,product:t.payload};case"BOOK_CREATE_FAIL":return{loading:!1,error:t.payload};case"BOOK_CREATE_RESET":return{};default:return e}},bookDelete:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"BOOK_DELETE_REQUEST":return{loading:!0};case"BOOK_DELETE_SUCCESS":return{loading:!1,success:!0,product:t.payload};case"BOOK_DELETE_FAIL":return{loading:!1,error:t.payload};case"BOOK_DELETE_RESET":return{};default:return e}},productDetails:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{product:{reviews:[]}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"BOOK_DETAIL_REQUEST":return{loading:!0};case"BOOK_DETAIL_SUCCESS":return{loading:!1,success:!0,product:t.payload};case"BOOK_DETAIL_FAIL":return{loading:!1,error:t.payload};default:return e}},productUpdate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{product:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"BOOK_UPDATE_REQUEST":return{loading:!0};case"BOOK_UPDATE_SUCCESS":return{loading:!1,success:!0,product:t.payload};case"BOOK_UPDATE_FAIL":return{loading:!1,error:t.payload};case"BOOK_UPDATE_RESET":return{product:{}};default:return e}}}),ie={userLogin:{userInfo:localStorage.getItem("userInfo")?JSON.parse(localStorage.getItem("userInfo")):null}},le=[ce.a],ue=Object(ne.c)(oe,ie,ne.a.apply(void 0,le));c.a.render(Object(p.jsx)(C.Provider,{store:ue,children:Object(p.jsx)(re,{})}),document.getElementById("root"))},28:function(e,t,a){"use strict";a.r(t),a.d(t,"login",(function(){return i})),a.d(t,"logout",(function(){return l})),a.d(t,"register",(function(){return u})),a.d(t,"getUserDetails",(function(){return j})),a.d(t,"updateUserProfile",(function(){return d}));var r=a(9),n=a.n(r),c=a(15),s=a(16),o=a.n(s),i=function(e,t){return function(){var a=Object(c.a)(n.a.mark((function a(r){var c,s,i;return n.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,r({type:"USER_LOGIN_REQUEST"}),c={headers:{"Content-Type":"application/json"}},a.next=5,o.a.post("/api/user/login",{email:e,password:t},c);case 5:s=a.sent,i=s.data,console.log("data"),console.log(i),r({type:"USER_LOGIN_SUCCESS",payload:i}),localStorage.setItem("userInfo",JSON.stringify(i)),a.next=16;break;case 13:a.prev=13,a.t0=a.catch(0),r({type:"USER_LOGIN_FAIL",payload:a.t0.response&&a.t0.response.data.message?a.t0.response.data.message:a.t0.message});case 16:case"end":return a.stop()}}),a,null,[[0,13]])})));return function(e){return a.apply(this,arguments)}}()},l=function(){return function(e){localStorage.removeItem("userInfo"),e({type:"USER_LOGOUT"})}},u=function(e,t,a){return function(){var r=Object(c.a)(n.a.mark((function r(c){var s,i,l;return n.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,c({type:"USER_REGISTER_REQUEST"}),s={headers:{"Content-Type":"application/json"}},r.next=5,o.a.post("/api/user/register",{name:e,email:t,password:a},s);case 5:i=r.sent,l=i.data,c({type:"USER_REGISTER_SUCCESS",payload:l}),c({type:"USER_LOGIN_SUCCESS",payload:l}),localStorage.setItem("userInfo",JSON.stringify(l)),r.next=15;break;case 12:r.prev=12,r.t0=r.catch(0),c({type:"USER_REGISTER_FAIL",payload:r.t0.response&&r.t0.response.data.message?r.t0.response.data.message:r.t0.message});case 15:case"end":return r.stop()}}),r,null,[[0,12]])})));return function(e){return r.apply(this,arguments)}}()},j=function(e){return function(){var t=Object(c.a)(n.a.mark((function t(a,r){var c,s,i,l,u;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"USER_DETAILS_REQUEST"}),c=r(),s=c.userLogin.userInfo,i={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s.token)}},t.next=6,o.a.get("/api/user/".concat(e),i);case 6:l=t.sent,u=l.data,a({type:"USER_DETAILS_SUCCESS",payload:u}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),a({type:"USER_DETAILS_FAIL",payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,a){return t.apply(this,arguments)}}()},d=function(e){return function(){var t=Object(c.a)(n.a.mark((function t(a,r){var c,s,i,l,u;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"USER_UPDATE_REQUEST"}),c=r(),s=c.userLogin.userInfo,i={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s.token)}},t.next=6,o.a.put("/api/user/profile",e,i);case 6:l=t.sent,u=l.data,a({type:"USER_UPDATE_SUCCESS",payload:u}),a({type:"USER_LOGIN_SUCCESS",payload:u}),localStorage.setItem("userInfo",JSON.stringify(u)),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),a({type:"USER_UPDATE_FAIL",payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e,a){return t.apply(this,arguments)}}()}},78:function(e,t,a){},79:function(e,t,a){}},[[112,1,2]]]);
//# sourceMappingURL=main.41ac078a.chunk.js.map